<!doctype html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <title>Bitcoin Balance Scanner - bitcoin data.science</title>
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <meta name="description" content="Tool to check the balance of multiple bitcoin addresses at once. Segwit support">
   <meta name="robots" content="index, follow" />
   <meta name="keywords"
      content="Bitcoin Address Balance Scanner,bitcoin, balance, checker, address,addresses,multiple addresses" />
   <link rel="shortcut icon" href="img/favicon.svg">
   <link rel="canonical" href="https://bitcoindata.science/bitcoin-balance-check.html">
   <link rel="alternate" hreflang="x-default" href="https://bitcoindata.science" />
   <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
   <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
   <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
   <link rel="manifest" href="/site.webmanifest">
   <link rel="mask-icon" href="img/safari-pinned-tab.svg" color="#111316">
   <meta name="apple-mobile-web-app-title" content="bitcoin data.science">
   <meta name="application-name" content="bitcoin data.science">
   <meta name="msapplication-TileColor" content="#2b5797">
   <meta name="theme-color" content="#111316">
   <meta property="og:title" content="Bitcoin Address Balance Scanner - bitcoin data.science" />
   <meta property="og:type" content="website" />
   <meta property="og:url" content="https://bitcoindata.science/" />
   <meta property="og:image" content="https://bitcoindata.science/img/logo.png" />
   <meta property="og:description"
      content="Tool to check the balance of multiple bitcoin addresses at once. Segwit support" />
   <meta property="og:locale" content="en_US" />
   <meta property="og:site_name" content="bitcoin data.science" />
   <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Check the balance of your bitcoin addresses",
        "description": "Check the balance of multiple bitcoin addresses, from different wallets",
        "alternateName": [
          "bitcoindata.science",
          "Bitcoin Data Science",
          "bitcoin datascience"
        ],
        "url": "https://bitcoindata.science",
        "logo": "https://bitcoindata.science/img/logo.svg",
        "sameAs": [
          "https://bitcoindata.science"
        ]
      }
   </script>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"></script>
   <link href="css/style.css" rel="stylesheet">
   <script src="components/navbar.js" type="text/javascript" defer></script>
   <script src="components/footer.js" type="text/javascript" defer></script>
   <script src="components/ad.js" type="text/javascript" defer></script>
   <script type="text/javascript" src="qrcode/html5-qrcode.min.js"></script>
</head>

<body>

   <!-- Navbar -->
   <header>
      <navbar-component></navbar-component>
   </header>
   <!-- Page Content -->
   <main class="container-fluid col-lg-10 col-xl-8">
      <div class="mt-5">
         <ad-component></ad-component>
         <h1 class="h1 fw-semibold mb-0"><span class="d-none d-md-inline">Bitcoin</span> Address Balance Scanner</h1>
         <span class="header-line bg-secondary rounded mb-2 d-inline-block w-75"> </span>
         <h2 class="lead">Scan any bitcoin address to see its balance. You can scan multiple addresses.</h2>
      </div>
      <div class="bg-body-tertiary rounded p-5 border shadow-sm text-center">
         <div id="reader" class="border-0" width="400px"></div>
         <button class="btn btn-primary mt-3" id="startButton">Start Scanning</button>
         <button class="btn mt-3" id="stopButton">Stop Scanning</button>
      </div>

      <p id="source" class="small text-muted text-end">Data from mempool.space and Coindesk.</p>

      <output id="balances" class="mt-4 px-3 w-100">
      </output>
      <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true"
         onBlur="javascript:document.title = 'Bitcoin Balance Scanner - bitcoin data.science';">
         <div class="modal-dialog">
            <div class="modal-content">
               <div class="modal-header">
                  <h5 class="modal-title"></h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
               </div>
               <div class="modal-body">
                  <p>Address: <code class="modal-address text-primary"></code></p>
                  <p id="modal-body-text" class="text-warning-emphasis font-monospace"><span
                        class="modal-balance"></span> (<span class="modal-value"></span>)</p>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary shadow-sm btn-lg px-5" data-bs-dismiss="modal"
                     onclick="handleClick()">Close</button>
                  <button type="button" class="btn btn-primary shadow-sm btn-lg px-5" onclick="handleClick()"
                     data-bs-dismiss="modal">Reload Data</button>
               </div>
            </div>
         </div>
      </div>
   </main>
   <footer-component></footer-component>

   <script type="text/javascript">
      let scannedCodes = [];

      // Get Bitcoin Price
      async function getBtcPrice() {
         try {
            try {
               const response = await fetch('https://bitcoindata.science/api/priceusd.json');
               const data = await response.json();
               let btcPrice = data.price;
               return btcPrice
            }
            catch (error) {
               console.warn('bitcoindata API failed - ' + error)
               const response = await fetch("https://api.coindesk.com/v1/bpi/currentprice/BRL.json");
               const data = await response.json();
               let btcPrice = data.bpi.USD.rate_float;
               return btcPrice;
            }
         }
         catch (error) {
            console.warn(error)
         }
      };


      async function getAddressBalance(address, price, balancearray) {
         try {
            try {
               const response = await fetch('https://mempool.space/api/address/' + address);
               const data = await response.json();
               balancearray.push({
                  address: address,
                  balance: (data.chain_stats.funded_txo_sum - data.chain_stats.spent_txo_sum) / 100000000,
                  value: parseFloat(((data.chain_stats.funded_txo_sum - data.chain_stats.spent_txo_sum) / 100000000 * price).toFixed(2)),
                  unconfirmed: (data.mempool_stats.funded_txo_sum - data.mempool_stats.spent_txo_sum) / 100000000,
                  unconfirmed_value: parseFloat(((data.mempool_stats.funded_txo_sum - data.mempool_stats.spent_txo_sum) / 100000000 * price).toFixed(2)),
               })
            }
            catch (error) {
               console.warn('Mempool API failed - ' + error)
               const response = await fetch('https://api.blockcypher.com/v1/btc/main/addrs/' + address + '/balance');
               const data = await response.json();
               balancearray.push({
                  address: address,
                  balance: data.balance / 100000000,
                  value: parseFloat((data.balance / 100000000 * price).toFixed(2)),
                  unconfirmed: data.unconfirmed_balance,
                  unconfirmed_value: parseFloat((data.unconfirmed_balance * price).toFixed(2)),
               }
               )
            }
         }
         catch (error) {
            console.warn(error)
         }
      };

      async function plotBalance(address) {
         try {
            const price = await getBtcPrice();
            const balances = await getAddressBalance(address, price, scannedCodes);

            document.getElementById('balances').innerHTML = `
               <div>
                  ${scannedCodes.map(i => `
                  <div class="bg-body-tertiary rounded border p-3 my-3 row">
                     <div class="row">
                     <div class="col-md-6"><code><a target="_blank" rel="noreferrer" title="${i.address}" href="https://mempool.space/address/${i.address}">${i.address}</a></code></div>
                     <div class="w-100 d-none d-xs-block"></div>
                     <div class="col col-md-3 pe-0">${i.balance.toLocaleString(undefined, { minimumFractionDigits: 8, maximumFractionDigits: 8 })} BTC</div>
                     <div class="col col-md-3 pe-0">${i.value.toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</div>
                  </div>
                  ${i.unconfirmed !== 0 ? `
                  <div class="row">
                     <div class="col-md-6"><code class="text-warning-emphasis">unconfirmed</code></div>
                     <div class="w-100 d-none d-xs-block"></div>
                     <div class="col col-md-3 pe-0 text-warning-emphasis">${i.unconfirmed.toLocaleString(undefined, { minimumFractionDigits: 8, maximumFractionDigits: 8 })} BTC</div>
                     <div class="col col-md-3 pe-0 text-warning-emphasis">${i.unconfirmed_value.toLocaleString('en-US', { style: 'currency', currency: 'USD' })}</div>
                  </div>` : ''}
               </div>
               `).join('')}`
         } catch (error) {
            console.error('Error fetching data:', error);
         }
      }

      const html5QrCodeScanner = new Html5Qrcode(
         "reader", { formatsToSupport: [Html5QrcodeSupportedFormats.QR_CODE] }
      );

      const startScanning = () => {
         html5QrCodeScanner.start({ facingMode: "environment" }, config, qrCodeSuccessCallback);
      };

      const stopScanning = () => {
         html5QrCodeScanner.stop();
      };

      const qrCodeSuccessCallback = (decodedText, decodedResult) => {
         plotBalance(decodedResult.decodedText.replace('bitcoin:', ''));
         // Stop the entire scanner instance (including camera feed).
         stopScanning()
      };
      const config = { fps: 10, qrbox: { width: 250, height: 250 } };

      document.getElementById('startButton').addEventListener('click', startScanning);
      document.getElementById('stopButton').addEventListener('click', stopScanning);
   </script>
</body>

</html>